<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Background Remover â€” Pro Advance</title>  <style>
    :root{
      --bg:#0d0d0f; --card:#111216; --muted:#9aa0a6; --accent1:#00eaff; --accent2:#7b4bff; --accent-grad: linear-gradient(90deg,var(--accent1),var(--accent2));
      --glass: rgba(255,255,255,0.03);
    }
    body{
      margin:0; background:var(--bg); color:white; font-family:Poppins,system-ui; padding:22px; display:flex; justify-content:center;
    }

    .container{ max-width:1100px; width:100%; }

    h1{ font-size:28px; margin-bottom:12px }

    /* Upload */
    .upload-box{ padding:18px; background:var(--glass); border:1px dashed rgba(255,255,255,0.08); border-radius:14px; text-align:center; cursor:pointer; }
    .upload-box:hover{ border-color:var(--accent1) }
    input[type=file]{ display:none }

    /* Before After */
    .compare-wrap{ position:relative; width:100%; margin-top:20px; border-radius:14px; overflow:hidden; }
    .compare-wrap img{ width:100%; display:block }
    .after-img{ position:absolute; inset:0; width:50%; overflow:hidden; }
    .after-img img{ width:200%; height:100%; object-fit:cover }
    .slider{ position:absolute; top:0; bottom:0; left:50%; width:4px; background:var(--accent1); cursor:ew-resize }

    /* Brush Tools */
    .tools{ margin-top:22px; display:flex; gap:14px; align-items:center }
    .btn{ padding:10px 16px; border-radius:10px; border:0; cursor:pointer; background:var(--accent-grad); color:#000; font-weight:600 }
    .btn.secondary{ background:#333; color:white }
    .canvas-area{ margin-top:18px; border:1px solid rgba(255,255,255,0.08); border-radius:12px; overflow:hidden; position:relative }
    #maskCanvas{ position:absolute; inset:0; }

    #downloadBtn{ margin-top:16px; display:none; padding:14px 18px; border-radius:14px; background:#00ff9d; border:0; font-weight:700; cursor:pointer }

  </style></head>
<body><div class="container">
  <h1>Advanced Background Remover (Brush + AI)</h1>  <label class="upload-box" id="uploadBox">
    <strong>Click to upload image</strong><br>
    <small>PNG / JPG</small>
    <input type="file" id="fileInput" accept="image/*" />
  </label>  <!-- Before / After Compare -->  <div class="compare-wrap" id="compareWrap" style="display:none">
    <img id="beforeImg" /><div class="after-img" id="afterContainer">
  <img id="afterImg" />
</div>

<div class="slider" id="slider"></div>

  </div>  <!-- Brush Tools -->  <div class="tools" id="tools" style="display:none">
    <button class="btn" id="brushBtn">Brush Select</button>
    <button class="btn secondary" id="eraseBtn">Erase Brush</button>
    <button class="btn secondary" id="processBtn">AI Remove Background</button>
  </div>  <div class="canvas-area" id="canvasArea" style="display:none">
    <canvas id="mainCanvas"></canvas>
    <canvas id="maskCanvas"></canvas>
  </div><button id="downloadBtn">Download Final Image</button>

</div><script>
  const fileInput = document.getElementById('fileInput');
  const uploadBox = document.getElementById('uploadBox');
  const beforeImg = document.getElementById('beforeImg');
  const afterImg = document.getElementById('afterImg');
  const compareWrap = document.getElementById('compareWrap');
  const afterContainer = document.getElementById('afterContainer');
  const slider = document.getElementById('slider');
  const tools = document.getElementById('tools');
  const mainCanvas = document.getElementById('mainCanvas');
  const maskCanvas = document.getElementById('maskCanvas');
  const canvasArea = document.getElementById('canvasArea');
  const brushBtn = document.getElementById('brushBtn');
  const eraseBtn = document.getElementById('eraseBtn');
  const processBtn = document.getElementById('processBtn');
  const downloadBtn = document.getElementById('downloadBtn');

  let drawing = false;
  let mode = "brush";
  let ctx, maskCtx;
  let loadedImage;

  uploadBox.onclick = () => fileInput.click();

  fileInput.onchange = e => {
    const file = e.target.files[0];
    if (!file) return;

    const url = URL.createObjectURL(file);
    beforeImg.src = url;
    afterImg.src = url;
    loadedImage = url;

    beforeImg.onload = () => {
      compareWrap.style.display = "block";
      tools.style.display = "flex";
      canvasArea.style.display = "block";

      mainCanvas.width = beforeImg.width;
      mainCanvas.height = beforeImg.height;
      maskCanvas.width = beforeImg.width;
      maskCanvas.height = beforeImg.height;

      ctx = mainCanvas.getContext('2d');
      maskCtx = maskCanvas.getContext('2d');

      ctx.drawImage(beforeImg, 0, 0);
    }
  }

  /* Brush Controls */
  brushBtn.onclick = () => mode = "brush";
  eraseBtn.onclick = () => mode = "erase";

  maskCanvas.onmousedown = e => { drawing = true; draw(e); }
  maskCanvas.onmouseup = () => drawing = false;
  maskCanvas.onmousemove = e => drawing ? draw(e) : null;

  function draw(e){
    const rect = maskCanvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    maskCtx.fillStyle = mode === 'brush' ? 'rgba(0,255,0,0.8)' : 'rgba(0,0,0,1)';
    maskCtx.beginPath();
    maskCtx.arc(x, y, 20, 0, 2*Math.PI);
    maskCtx.fill();
  }

  /* AI Processing (Simulated basic version) */
  processBtn.onclick = () => {
    const bw = beforeImg.width;
    const bh = beforeImg.height;

    const temp = document.createElement('canvas');
    temp.width = bw;
    temp.height = bh;
    const tctx = temp.getContext('2d');

    tctx.drawImage(beforeImg, 0, 0);
    const imgData = tctx.getImageData(0, 0, bw, bh);
    const maskData = maskCtx.getImageData(0, 0, bw, bh);

    for (let i=0; i<imgData.data.length; i+=4){
      const m = maskData.data[i+1]; // green channel = selected
      if (!m) imgData.data[i+3] = 0; // remove everything except brushed area
    }

    tctx.putImageData(imgData,0,0);
    afterImg.src = temp.toDataURL('image/png');
    downloadBtn.style.display = 'inline-block';
  }

  downloadBtn.onclick = () => {
    const a = document.createElement('a');
    a.download = 'final.png';
    a.href = afterImg.src;
    a.click();
  }

  /* Before/After Slider */
  let draggingSlider = false;

  slider.onmousedown = () => draggingSlider = true;
  document.onmouseup = () => draggingSlider = false;
  document.onmousemove = e => {
    if (!draggingSlider) return;
    const rect = compareWrap.getBoundingClientRect();
    let x = e.clientX - rect.left;
    if (x < 0) x = 0;
    if (x > rect.width) x = rect.width;

    afterContainer.style.width = x + 'px';
    slider.style.left = x + 'px';
  }
</script></body>
</html>
